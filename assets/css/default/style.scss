---
---

iframe { display: initial; } // show navlink after apply style.css

@import "normalize";

$ghprxy: "https://ghproxy.com/https://raw.githubusercontent.com/Kirisoup/kirisoup.github.io/main";
$ghprxy: "";

:root {
    --txtColor: #44d;
    --txtColor-sat: #00f;
    --txtColor-fade: #eef;
    --txtColor-link: #4cc;
    --txtColor-plain: #000;
    --txtColor-green: #464;
    --txtColor-green-fade: #efe;
    --txtColor-red: #d04;
    --txtColor-red-fade: #fde;
    --pgColor: #fff;
}

@mixin darkscheme {
    --txtColor: #aaf;
    --txtColor-sat: #00c;
    --txtColor-fade: #224;
    --txtColor-link: #abb;
    --txtColor-plain: #fff;
    --txtColor-green: #aca;
    --txtColor-green-fade: #232;
    --txtColor-red: #f8a;
    --txtColor-red-fade: #422;
    --pgColor: #002;
}



/* ==== M A I N ==== */

#soup\.exe {
// styl
    border: #fff 1px solid;
    box-shadow: 10px 10px 20px 10px #44d;
    &::-webkit-resizer { background: url(/assets/image/resizer.gif) {size: cover}; }    
}

#soup\.exe, #pseu {
// resize
    max: { height: 95vh; width: 99vw }
    min: { height: 25vh; width: 25vw }
    resize: both;
}

html { image-rendering: pixelated; }

// main bg
html, .nav { 
    background: url(/assets/image/bg.gif)
        { color: #000; position: center; size: MAX(20vw,40vh); }
    }

html::before { content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background: url(/assets/image/cloud.png)
        { size: cover; position: center; };
}

html::after { content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    background: url(/assets/image/rain.gif);
    opacity: .5;
}

html:has(.cornerCara:not([id="0"])) {
    background: url(/assets/image/IMG_1148.JPG)
        {size: contain; position: right};
    background-color: #000;
    background-blend-mode: hard-light;
}

/* ======= */



/* ==== C 1 ==== */

.c1 {
    .banner {
    // styl
        border: #000 1px solid;
        // background: url(https://media.tenor.com/5lWosOHS630AAAAC/amor.gif);
        // background: url(https://usagif.com/wp-content/uploads/gifs/water-66.gif);
        // background: url(https://64.media.tumblr.com/9af92cc03553bd821021fd950fbc33b5/1534f96efdb15e70-b5/s100x200/6f110ffcfa7afe0af25add8144e9d30fbefc97fe.gifv);
        background: url(/assets/image/xp.gif)
            { size: cover; };

        &::before, &::after {
            position: absolute;
            inset: 0;
            background: {
                repeat: no-repeat !important;
            };
        }

        &::before { content: "";
            background: url(/assets/image/banner.png) {
                color: #ccf;
                size: MAX(90%, 600px) 100% !important;
                position: 40px;
            };
            mix-blend-mode: hard-light;
            opacity: .8;
        }

        &::after { content: "";
            background: url(/assets/image/bannerTxt.png) {
                size: auto 100% !important;
                position: calc(100% - MAX(30%, 20px)) !important;
            };
            // opacity: .5;
        }

    }

    .main {

        /* ==== N A V B A R ==== */

        .nav {
        // pos
            position: relative;
        // styl
            border-inline: #44d 1px solid;

            &-c {
            // pos
                position: relative;
                z-index: 1;
            // size
                height: 100%;

                p {
                    padding: { inline: 1em 0;  block: .5em; };
                    margin-block: 0;
                    display: flex;
                }

                a, .urHere-i {
                    padding: { right: 100%;  block: .5em; };
                    margin:  { right: -100%; block: -.5em };
                }

            /* ====link fluid hovering==== */

                text-shadow: #fff 2px 2px;
                mix-blend-mode: hard-light;
                color: #2985ff;

                a {
                    position: relative;
                    color: #38f;

                    &.urHere {
                        pointer-events: none;
                    }
                }

                .urHere-i {
                    display: inline-block;
                }

                /* ====ani==== */

                p {
                    transition: all 0s .2s,
                        background-color .4s .2s;

                    &:hover {
                        transition: all 0s;
                        padding-left: 20%;
                        background-color: #ccf;
                    }
                }
            }

            /* ====Animating coolaf gradient bg==== */

            &-b {
            // pos
                position: absolute;
                left: -25%;
            // size
                height: 400%; width: 150%;
                bottom: 0;
            // styl
                mix-blend-mode: lighten;
                background:
                    linear-gradient(90deg, #000, #0000 50%),
                    repeating-linear-gradient(#f80, #f0f 25%, #0ff 37.5%, #8f0 42%, #f80 50%);
                filter: contrast(2) blur(10px) ;

                /* ====ani==== */

                animation: bgScroll 10s linear infinite;
                @keyframes bgScroll {
                    from { bottom: -200%; }
                    to   { bottom: 0; }
                }
            }
        }

        .window {
            // background: var(--pgColor);
            overflow: hidden;
        }
    }

    .bottom {
    // size
        width: 100%;
    // styl
        border: #44d 1px solid;
        background: #000;

        img {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }
    }
}



/* ==== C 2 ==== */

.c2 {
    &-b {
    // pos
        position: absolute;
        inset: 0;
    // styl
        image-rendering: pixelated;
        background: url(/assets/image/bg2.gif) {
            color: #000;
            size: MAX(10vw,20vh);
        };
    }


    .chatroom {
    // pos
        position: absolute;
        inset: 0;
        width: auto; height: auto;
        overflow: scroll;
        margin-inline: 5%;

        .giscus {
            margin-block: 5%;
            height: 100%;
            // min-height: unset !important;

            iframe {
                position: absolute;
                left: 0; right: 0;
            }
        }
    }

    & iframe[name="neolink"] {
        position: absolute;
        margin: 10px;
        bottom: 0;
    }
}

/* ======== */



/* ==== C O N T E N T ==== */

.content {
// styl
    text-align: justify;
    text-justify: inter-ideograph;
    background-color: var(--pgColor);
    padding-inline: 3em 2em;

    *::selection {
        color: var(--pgColor);
        background: var(--txtColor);
    }
}

// fullscreen

.fullscreen {
    transition: opacity .2s .2s, top .2s, bottom .2s;
// pos
    position: absolute;
    display: flex;
    flex-direction: column;
    left: 50%;
    top: 50vh; bottom: 50vh;
    transform: translateX(-50%);
    z-index: 10;
// size
    width: 90vw;
// styl
    background: #d1d1f7;
    box-shadow: 
        -1px -1px 0 1px #e8e8fb, 
        0 0 0 2px #000,
        inset -2px -4px #a2a2ee,
        inset 2px 2px #fff;

    &.on {
        transition: opacity .2s, top .2s, bottom .2s;
        opacity: 1;
        pointer-events: all;
        top: 2vh; bottom: 2vh;
    }

    .content {
    // size
        flex: 9;
        padding-inline: 2em calc(2em + 5vw);
        margin: 6px;
    // styl
        font-size: 1.2rem;
        box-shadow: 
            inset -2px -2px #e8e8fb,
            inset 2px 2px #44d;
    }

    .bottomBar {
        height: 1em;
        padding: 0 6px 10px 6px;
    }
}

@mixin fullscreen-dark {
    .fullscreen:has(.darkTg input:checked) {
        background: #338;
        box-shadow: 
            -1px -1px 0 1px #aaf,
            0 0 0 2px #44d,
            inset -2px -4px #224,
            inset 2px 2px #000;

        .buttonBar {
            background: linear-gradient(90deg, #44d 20%, #000);
        }
        
        .content {
                box-shadow: 
                    inset -2px -2px #224,
                    inset 2px 2px #aaf;
            }

        .bottomBar { color: #fff; }
    }    
}

// button bar

.buttonBar {
// size
    height: 1.5em;
    padding: .25em;
// styl
    color: #fff;
    background: linear-gradient(90deg, #44d 20%, #a2a2ee);

    .toggle {
    // pos
        position: absolute;
        display: block;
        top: .25em;
        margin-right: .5em;
    // size
        width: 1.5em; height: 1.5em;
    // styl
        box-sizing: border-box;
        background: #d1d1f7;
        box-shadow: 
            inset -1.5px -1.5px #44d,
            inset 1.5px 1.5px #fff,
            inset -3px -3px #a2a2ee,
            inset 3px 3px #e8e8fb;

        &::before { content: "";
            position: absolute;
            top: 5px; left: 5px;
            right: 6px; bottom: 6px;
            image-rendering: pixelated;
            background: { size: cover !important; repeat: no-repeat !important} ;
        }

        &:hover { background: #e8e8fb; }

        &:active {
            background: #d1d1f7;
            box-shadow: 
                inset -1.5px -1.5px #fff,
                inset 1.5px 1.5px #44d,
                inset -3px -3px #e8e8fb,
                inset 3px 3px #a2a2ee;

            &::before {
                top: 6px; left: 6px;
                right: 5px; bottom: 5px;
                }
        }

        .window &.fullscreenTg::before     { background: url(/assets/image/button/max.gif);   }
        .fullscreen &.fullscreenTg::before { background: url(/assets/image/button/unmax.gif); }
        &.darkTg::before                   { background: url(/assets/image/button/dark.gif);  }
        &.fontTg::before                   { background: url(/assets/image/button/font.gif);  }

    }

    .window & {
    // pos
        position: relative;
        height: 100%;
        min-width: 20px;
        max-width: 20px;
        padding-inline: .25em;
    // styl
        background: #44d;

        .toggle {
            left: 50%;
            transform: translateX(-50%);
        }

        .darkTg { top: 2em; }
        .fontTg { top: 3.5em }
    }

    .fullscreen & {
        .fullscreenTg { right: 0em; }
        .darkTg { right: 1.75em; }
        .fontTg { right: 3.25em; }
    }
}



/* ==== C O R N E R ==== */ // WARNING: spaghetti ahead!!!

.cornerCara {
    &, &-b {
    // pos
        position: fixed;
        bottom: -16vh; right: calc(10vw - 39vh);
        transform: scale(75%);
        z-index: -3;
    // size
        height: calc(100vh + 10vw);
        max-height: 140vh;
        aspect-ratio: .77;
    // styl
        filter: drop-shadow(-1vw 2vw #0008);
    }

    &-b {
        transition: opacity 1s;
        pointer-events: none;
    // pos
        z-index: 2;
    }

    &::before { content: "";
        position: absolute;
        inset: 0;
    }

    #soup\.exe:hover ~&-b, #soup\.exe:active ~&-b { transition: opacity 0s; opacity: .5; }

    /* ====randomBG==== */

    @for $i from 0 to 16 { &[id="#{$i}"] +&-b, &[id="#{$i}"]::before { background: url(/assets/image/cornerCara/marisa#{$i}.webp)
        { size: contain } }; }

    & { 
        background: url(/assets/image/cornerCara/marisaB_.webp) {
            size: 120%;
            position: -40% -40%;
        };
        image-rendering: pixelated;
    }
}

.ibm {
    &, &-b {
    // pos
        position: absolute;
        right: calc(10vw - 39vh); bottom: 0;
        z-index: -1;
        pointer-events: visible;
        transform: translateX(-20%);
    // size
        height: calc(25vh + 2.5vw);
        max-height: 35vh;
        aspect-ratio: 2;
    }

    &-b {
        mix-blend-mode: darken;
    }
}

.vid {
// pos
    position: absolute;
    display: none;
    right: -38%; bottom: -55%;
    transform: scale(.17, .23) rotate(8deg) skew(3deg);
// size
    width: 170%;
    aspect-ratio: 16/9;
// styl
    pointer-events: none;
    background: #fff;

    @keyframes flicker {
        0% { opacity: .65;}
        50% { opacity: .65;}
        50.1% { opacity: .5; }
        100% { opacity: .5; }
    }

    iframe {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 10;
        inset: 0;
    }
}

.mask:has(input:checked) ~ .vid { display: block; animation: flicker .05s linear infinite; }


.pc {
    transition: visibility 0s 1s, opacity 1s;
    visibility: hidden;

    &-b {
        transition: opacity 1s;
        z-index: 1;
    }

    &, &-b {
    // pos
        position: absolute;
        right: 8%; bottom: 0%;
    // size
        width: 75%;
        aspect-ratio: 1.63;
    // styl
        pointer-events: none;
        background: url(/assets/image/ibm.png)
            { size: cover; };

        &::before {
            position: absolute;
            left: 35%;
            top: 45%;
            width: 50%;
            z-index: 20;
            transform: rotate(9deg) skew(7deg);
            font-size: 3.2vh;
        }
    }

    #soup\.exe:hover ~ .ibm-b &, #soup\.exe:active ~ .ibm-b & {
        transition: visibility 0s;
        visibility: visible;
    }

    #soup\.exe:hover ~ .ibm &-b, #soup\.exe:active ~ .ibm &-b {
        transition: 0s;
        opacity: 0;
    }
}


.mask {
// pos
    position: absolute;
    display: block;
    right: 32.7%; bottom: 20%;
    z-index: 1;
    transform: rotate(11deg) skew(7deg);
// size
    width: 28%;
    aspect-ratio: 1.34;
// styl
    background: url(/assets/image/rainbowDither.png)
        {size: 4vw};
    opacity: 0;
    mix-blend-mode: darken;

    animation: maskScroll 1s linear infinite;
    @keyframes maskScroll {
        0% { background-position: 0; }
        100% { background-position: 8vw; }
    }

    &:has(input:checked) { opacity: .3; }

    &:not(:has(input:checked)) ~.pc-b, .ibm-b:not(:has(~.ibm & input:checked)) .pc {
        &::before { color: #fff; }
        &::before { content: "Power off"; filter: drop-shadow(0 0 5px #fff); }
    }
}

/* ======== */



/* ==== C U R S O R ==== */

// html { cursor: none;}

#soup\.exe, .fullscreen { cursor: url(/assets/image/cursor/hat.gif), auto !important; }

@mixin wCursorGif($id) { cursor: url(/assets/image/cursor/hatq#{$id}.gif), auto; }

a, button, label, .cornerCara {
    animation: wonderCursor .5s infinite;
    @keyframes wonderCursor {
        0%   { @include wCursorGif(1) }
        25%  { @include wCursorGif(2) }
        50%  { @include wCursorGif(3) }
        75%  { @include wCursorGif(4) }
        100% { @include wCursorGif(5) }
    }
}

canvas {
    transition: .5s;
    opacity: .5;
    z-index: -2;
    image-rendering: pixelated;
}

#soup\.exe:hover, #soup\.exe:active {
    ~ canvas {
        opacity: 0;
        animation: hideCanvas .5s linear forwards;
        @keyframes hideCanvas {
            0% { visibility: visible; }
            100% { visibility: hidden; }
        }
    }
}


/* ======== */



/* ==== S C R O L L B A R ==== */
.window, .fullscreen { ::-webkit-scrollbar {
                   width:  24px;
    &:horizontal { height: 24px; }
    
    &-corner { background: #dfdfdf; }

    &-track { background: url(/assets/image/scrollbar/bg.png) {size: 4px}; }
    
    &-thumb {
        background: #d1d1f7;
        box-shadow: 
            inset -1.5px -1.5px #44d,
            inset 1.5px 1.5px #fff,
            inset -3px -3px #a2a2ee,
            inset 3px 3px #e8e8fb;
    }

    &-button { background-size: cover !important;

        &:horizontal, &:vertical { &:start:decrement, &:end:increment { display: block; }}    

        &:vertical { height: 24px;
            &:start { background: url(/assets/image/scrollbar/up.png); }
            &:end   { background: url(/assets/image/scrollbar/down.png); }   
        }
        &:horizontal { width: 24px; 
            &:start { background: url(/assets/image/scrollbar/left.png); }
            &:end   { background: url(/assets/image/scrollbar/right.png); }    
        }
    }
}}

@mixin scrollbar-dark {
    .window, .fullscreen { &:has(.darkTg input:checked) { ::-webkit-scrollbar-thumb {
        background: #338;
        box-shadow: 
            inset -1.5px -1.5px #000,
            inset 1.5px 1.5px #aaf,
            inset -3px -3px #224,
            inset 3px 3px #44d;
    }}}
}

/* ======== */



/* ==== T X T ==== */

html {
    color: #000;
    text-underline-offset: 25%;
}

.content { color: var(--txtColor) !important;

    >p:not([class], :has(img)):after { content: "湯";
    //pos
        position: relative;
        display: inline-block;
        padding-left: .3em;
    //styl
        line-height: .5em;
        opacity: .5;
        font-size: .7em;
        color: var(--txtColor-red);
        transform: rotate(15deg);
        white-space: pre;
    }
}

a {
    position: relative;
    color: var(--txtColor-link);

    &::after { content: "";
        position: absolute;
        inset: -.5em;
    }
}

// headers font style
h1, h2, h3, h4, .fake.h1, .fake.h2, .fake.h3, .fake.h4 { font-weight: bolder; }
h5, h6, .fake.h5, .fake.h6 { font-weight: normal; }
h4, h6, .fake.h4, .fake.h6 { font-style: italic; }

// headers margin block
h1, h2, h3, h4, h5, h6 { margin-top: 1em;} // 1em top margin if headers is the first element
:first-child ~ { h1, h2, h3, h4, h5, h6 { margin-top: 2em;} } // 2em top margin if else

h1, h2 { margin-bottom: 1em; }
h3, h4, h5, h6 { margin-bottom: .5em; } 

h1, h2, h3, h4, h5, h6 { +h1, +h2, +h3, +h4, +h5, +h6 { margin-top: 0 !important; }} // reduce margin in between two adjacent headers  

// headers padding
h1, h2, h3, h4, h5, h6 {
    position: relative;
    inset: -.5rem -.2rem;
    padding: .5rem .2rem;
}

// headers underline
h1     { border-bottom: var(--txtColor) 3px solid; }
h2     { border-bottom: var(--txtColor) 3px dashed; }
h3, h4 { border-bottom: var(--txtColor) 3px dotted; }

h4, h5, h6 { width: max-content; }

// reveal heading id
h1, h2, h3, h4, h5 ,h6 { &[id] { 
    --notify: "--> 点击复制标题链接";

    &::before, &::after {
        font-weight: normal;
        font-size: max(.5em, .8rem);
        opacity: .7;
    }
}}

h1, h2, h3 { &[id] { 
    &::before, &::after { display: block; }

    &::before { content: "#" attr(id) "\00a0";
    // pos
        position: relative;
        bottom: .2em;
    // styl
        text-decoration: dashed underline 1.5px;
    }

    &:hover { &::after { content: var(--notify);
        // pos
            position: absolute;
            top: .5rem; right: 0;
        // styl 
            background: var(--pgColor);
            opacity: 1;
        }
    }

    &:active {
        background: var(--txtColor);
        color: var(--pgColor);

        &::after { content: ""; }
    }
}}

h4, h5, h6 { &[id] {
    &::after { content: "\00a0#" attr(id) "\00a0" "\00a0"; }

    &:hover { &::before { content: var(--notify);
        // pos
            position: absolute;
            top: -.8em; 
        // styl
            text-wrap: nowrap;
            background: var(--pgColor);
            opacity: 1;
        }
    }

    &:active {
        background: var(--txtColor);
        color: var(--pgColor);

        &::before { content: ""; }
    }
}}

// horizontal rule
hr {
    border: none { block: 2px var(--txtColor) solid };
    height: .2em;
    margin-block: 1em;
    // background: linear-gradient(#44d2, #0000);
}

// list
ul { ::marker { font-weight: bolder; } 
                list-style-type: "☆ "; 
    ul { ::marker { font-size: .7em; } 
                    list-style-type: hebrew; 
        ul { ::marker { font-size: .7em; } 
                        list-style-type: "。 ";
            ul { ::marker { font-size: .62em; }
                            // list-style-type: inherit;
                ul { // ::marker { font-size: inherit; }
                                list-style-type: "· "; }
            }
        }
    }
}

li { margin-bottom: .5em; }
ul { margin-top: .5em; }

/* ======== */



/* ==== D A R K M O D E ==== */

.buttonBar:has(.darkTg input:checked) ~.content, .content:has(~.buttonBar .darkTg input:checked) {
    @include darkscheme()
}

.content:has(~.buttonBar .darkTg input:checked) { background: #0008 !important; }

@include fullscreen-dark;

@include scrollbar-dark;

/* ======== */



/* ==== F O N T ==== */

html { font-display: swap; }

html                            { font-family: "fusion", monospace; }
html:has(.fontTg input:checked) { font-family: "ibm", monospace; }

code, kbd, samp { font-family: "ibm", monospace;}
html:has(.fontTg input:checked) code, kbd, samp { font-family: "ibm", monospace;}


@font-face {
    font-family: "fusion";
    src: url(/assets/font/fusion-pixel-10px-monospaced-zh_hant.ttf);
}

@font-face {
    font-family: "ibm";
    src: url(/assets/font/IBM3161.ttf);
}

@font-face {
    font-family: "zpix";
    src: url(/assets/font/zpix.ttf);
}

/* ======== */

@import "moardown";

@import "neko";

