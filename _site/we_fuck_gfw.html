<!DOCTYPE html>
<html lang="en_us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      霧雨蘑菇店 |/¥⑨都能读懂的网络代理教程：使用¥NekoRay¥/¥NekoBox¥进行网络代理.xml</title>
    <script async src="/assets/js/fallback-dom.js" onerror="this.onerror=null;newScript=document.createElement('script');newScript.src ='https://ghproxy.com/https://raw.githubusercontent.com/Kirisoup/kirisoup.github.io/main/_site/assets/js/fallback-dom.js';document.head.appendChild(newScript);"></script> <!-- store ghproxy prepended link as variable -->
    <link rel="stylesheet" href="/assets/css/default/layout.css" onerror="fallss(this)"> <!-- essential stylesheet -->
  </head>
  <body>
    <!-- change id only if javascript is enabled -->
    <div id="overflow-noscript">
      <script> document.getElementById("overflow-noscript").setAttribute("id", "overflow") </script>
    </div>
    <!-- main container -->
    <div id="soup.exe">
      <div class="c1">
        <div class="banner"></div>
        <div class="main">
          <div class="nav">
            <nav> 
  <p>
    
    <a href="/home">
      /主页/
    </a>
    <!--  -->
  </p>

  <p>
    
    <a href="/about">
      /关于/
    </a>
    <!--  -->
  </p>

  <p>
    
    <a href="/lab/">
      /实验室/
    </a>
    <!--  -->
  </p>

  <p>
    
    <a href="/archive">
      /归档页面/
    </a>
    <!--  -->
  </p>

  <p>
    
    <a href="/weeblog/">
      /网志/
    </a>
    <!--  -->
  </p>

 </nav>
          </div>
          <div class="window">
            <main class="content"><h2 id="index">目录</h2>
<ul id="markdown-toc">
  <li><a pageurl="/we_fuck_gfw" href="#index" id="markdown-toc-index">目录</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#%E5%89%8D%E8%A8%80" id="markdown-toc-前言">前言：</a></li>
  <li>
<a pageurl="/we_fuck_gfw" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86" id="markdown-toc-前置知识">前置知识：</a>    <ul>
      <li><a pageurl="/we_fuck_gfw" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86" id="markdown-toc-什么是网络代理">什么是网络代理：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#%E6%9C%AF%E8%AF%AD" id="markdown-toc-术语">术语：</a></li>
    </ul>
  </li>
  <li><a pageurl="/we_fuck_gfw" href="#%E4%B8%8B%E8%BD%BD-nekoray%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80--%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" id="markdown-toc-下载-nekoray仓库地址--下载地址">下载 NekoRay：仓库地址 | 下载地址</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#%E5%88%9D%E6%AC%A1%E5%90%AF%E5%8A%A8" id="markdown-toc-初次启动">初次启动</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#%E7%95%8C%E9%9D%A2" id="markdown-toc-界面">界面</a></li>
  <li>
<a pageurl="/we_fuck_gfw" href="#%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE" id="markdown-toc-关键配置">关键配置：</a>    <ul>
      <li><a pageurl="/we_fuck_gfw" href="#%E9%A6%96%E9%80%89%E9%A1%B9--%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE" id="markdown-toc-首选项--基本设置">首选项 &gt; 基本设置：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#%E9%A6%96%E9%80%89%E9%A1%B9--%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE" id="markdown-toc-首选项--路由设置">首选项 &gt; 路由设置：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#%E9%A6%96%E9%80%89%E9%A1%B9--tun-%E8%AE%BE%E7%BD%AE%E4%BB%85%E5%BD%B1%E5%93%8D-tun-%E6%A8%A1%E5%BC%8F%E4%BB%A3%E7%90%86" id="markdown-toc-首选项--tun-设置仅影响-tun-模式代理">首选项 &gt; TUN 设置（仅影响 TUN 模式代理）：</a></li>
      <li>
<a pageurl="/we_fuck_gfw" href="#%E5%AF%BC%E5%85%A5%E8%8A%82%E7%82%B9" id="markdown-toc-导入节点">导入节点：</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#%E4%BB%8E%E8%AE%A2%E9%98%85%E9%93%BE%E6%8E%A5%E5%AF%BC%E5%85%A5" id="markdown-toc-从订阅链接导入">从订阅链接导入：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86" id="markdown-toc-开始使用代理">开始使用代理：</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" id="markdown-toc-代理模式">代理模式：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#%E9%80%89%E6%8B%A9%E6%9C%80%E4%BD%B3%E8%8A%82%E7%82%B9%E7%90%86%E8%A7%A3%E8%AE%BE%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%8A%B6%E6%80%81" id="markdown-toc-选择最佳节点理解设备的网络代理状态">选择最佳节点、理解设备的网络代理状态</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#%E8%8A%82%E7%82%B9%E6%B5%8B%E9%80%9F" id="markdown-toc-节点测速">节点测速：</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E7%8A%B6%E6%80%81" id="markdown-toc-网络流量状态">网络流量状态：</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%90%86%E6%95%88%E6%9E%9C" id="markdown-toc-测试代理效果">测试代理效果：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#%E5%85%B6%E4%BB%96%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8" id="markdown-toc-其他关于网络安全">其他：关于网络安全</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#%E4%BB%BB%E4%BD%95%E6%97%B6%E5%80%99%E9%83%BD%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8-https" id="markdown-toc-任何时候都应该使用-https">任何时候都应该使用 HTTPS！</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#%E9%98%B2%E6%AD%A2-webrtc-%E6%B3%84%E9%9C%B2%E7%9C%9F%E5%AE%9E-ip" id="markdown-toc-防止-webrtc-泄露真实-ip">防止 WebRTC 泄露真实 IP</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#%E9%98%B2%E6%AD%A2-cdn-%E6%B3%84%E9%9C%B2%E9%9A%90%E7%A7%81" id="markdown-toc-防止-cdn-泄露隐私">防止 CDN 泄露隐私</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%8F%AF%E4%BF%A1%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C" id="markdown-toc-避免使用不可信的浏览器访问网络">避免使用不可信的浏览器访问网络</a></li>
        </ul>
      </li>
      <li><a pageurl="/we_fuck_gfw" href="#%E5%8F%82%E8%A7%81" id="markdown-toc-参见">参见：</a></li>
    </ul>
  </li>
</ul>

<p class="fake h1">⑨都能读懂的网络代理教程：<br>
<em class="small">使用 NekoRay / NekoBox 进行网络代理</em></p>

<blockquote class="info">
  <p>注：本教程面向 Windows 用户。</p>
</blockquote>

<h2 id="前言">前言：</h2>
<p>由于前几天从 Clash for Windows 删库开始的一系列事件，尤其是 Clash 内核与 Clash.Meta 内核的删库/归档，整个 Clash 客户端生态灰飞烟灭。</p>

<p>Clash for Windows 作为一个如此普及的代理客户端，加上我自己也是在两年前左右从 V2rayN 转为 CFW 忠实用户，正好借着这次迁移至 NekoRay 的机会，便想着干脆为这个支持 Xray, Sing-box, Hysteria, Naive 等多个内核，并且有着优秀方便的分流规则与 TUN 代理的优秀客户端写一篇使用教程。</p>

<h2 id="前置知识">前置知识：</h2>
<blockquote class="info">
  <p>虽然这一部分并非必须，但可以帮助你对网络代理建立系统性认识。若对网络代理已足够了解，可直接跳转下一部分</p>
</blockquote>

<h3 id="什么是网络代理">什么是网络代理：</h3>
<p>简单来说，当你访问一个网站 （如 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://google.com/">https://google.com/</a>），或是应用联网访问数据时，你的设备会向网络运营商发出请求，与目标网址的服务器间建立连接，开始数据交换。</p>

<p>在这种情况下，你的 IP 地址向目标服务器公开、运营商也会知道你所访问的地址。通常称这种连接方式为<strong>直连</strong>。</p>

<p>而<strong>使用代理的话，你的设备转而向运营商请求连接代理服务器，并且数据传输将会被加密，再进一步由代理服务器进一步连接至目标服务器；</strong></p>

<p>因此，运营商无法得知你此时连接的真实目的地与意图，同时目标服务器也无法得知你的真实IP，从而<strong>达到保护隐私与绕过防火墙的目的。</strong></p>

<h3 id="术语">术语：</h3>
<ul>
  <li>
<strong><em>代理客户端：</em></strong><br>
为你的设备<strong class="h">处理网络代理的客户端</strong>，拥有的功能通常包括使用多种方式代理本机网络流量，可配置的分流规则，从<em class="u">订阅链接</em>批量下载<em class="u">节点</em>等功能。</li>
  <li>
    <p><strong><em>节点：</em></strong><br>
一串包括了代理服务器地址，加密协议，密钥等信息的配置，系<strong class="h">建立代理连接的关键要素</strong>（使用机场的话大多数时候便无需手动配置节点）。</p>
  </li>
  <li>
    <p><strong><em>机场：</em></strong><br>
<strong class="h">提供与维护</strong>分布于世界各地的<strong class="h">代理服务器的服务商</strong>，通常通过<em class="u">订阅</em>的方式提供节点。</p>
  </li>
  <li>
    <p><strong><em>订阅链接：</em></strong><br>
大多数机场使用订阅链接作为<strong class="h">将</strong>全部<strong class="h">节点</strong>一次性<strong class="h">导入至代理客户端的方式</strong>（基于客户端的不同，用户还可以通过手动复制等方式导入节点）。</p>
  </li>
  <li>
    <p><strong><em>上传与下载：</em></strong><br>
上传指由你的设备通过互联网<strong class="h">向外界输出数据的行为</strong>，相反，下载则是你的设备<strong class="h">接收外界数据的行为</strong>；当你访问网络的时候，上传与下载无时不刻不在进行。</p>
  </li>
  <li>
<strong><em>延迟与速度：</em></strong><br>
延迟与速度是两个经常被混淆的概念。
　　
    <ul>
      <li>
<strong class="u">延迟</strong>
指<strong class="h">数据</strong>从你的设备<strong class="h">发送至目标服务器</strong>（在这个语境下则是代理服务器），目标服务器的回复<strong class="h">再传回你的设备所使用的总时间</strong>（如：200ms）；
　　</li>
      <li>
<strong class="u">速度</strong>
分为上传速度与下载速度，则是指<strong class="h">一定时间内你的设备所能上传/下载的数据总量</strong>（如：10mb/s）。</li>
    </ul>

    <blockquote class="info">
      <p>在使用代理的多数时候，我们更关注的是上传与下载速度，因为这通常是导致网络通信不畅的主要瓶颈。而延迟则通常用于检测节点的可用性，对网络的影响更加次要；</p>
    </blockquote>
  </li>
</ul>

<hr class="break">

<p class="stroke echorb bigger">接下来，本教程将正式启程！</p>

<hr>

<h2 id="下载-nekoray仓库地址--下载地址">下载 NekoRay：<a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray">仓库地址</a> | <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray/releases/latest">下载地址</a>
</h2>
<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/1c22af3b4ff6c1dbbecc2.png" alt=""></p>

<p>Windows 用户的请从 Release 中的下载文件名为<code class="language-plaintext highlighter-rouge">nekoray-...-windows64.zip</code>的文件。</p>

<p>下载后无需安装，自行解压到合适的路径，运行位于<code class="language-plaintext highlighter-rouge">.\nekoray-...-windows64\nekoray\nekoray.exe</code>路径的文件即可启动程序。</p>

<h2 id="初次启动">初次启动</h2>
<p>启动程序后首先将会看到以下窗口：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/28ee88573f88511ba6963.png" alt=""></p>

<p>两个内核在一般使用场景下区别不大，推荐使用 sing-box 内核。</p>

<h2 id="界面">界面</h2>
<p>进入主界面之后，会看到与下图类似的界面：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/73680951d07b5b4935f82.png" alt=""></p>

<p>其中，序号1到7分别是（暂时不理解的话没关系，下文中会对重要的部分进行讲解）：</p>

<table>
  <tbody>
    <tr>
      <td>
<ul>
  <li>工具栏：</li>
</ul>
</td>
      <td>程序配置、设置选项、以及导入代理节点等功能都可在此调出；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>代理模式：</li>
</ul>
</td>
      <td>默认的端口转发模式、系统代理模式、TUN 模式；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>节点列表：</li>
</ul>
</td>
      <td>接下来导入的节点将会显示在本列表中；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>日志：</li>
</ul>
</td>
      <td>会实时记录节点开关状态、网络连接等等信息——正常使用没有问题的话并不需要理解日志中的信息；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>当前节点：</li>
</ul>
</td>
      <td>显示当前启用的代理节点名称；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>转发端口：</li>
</ul>
</td>
      <td>用于手动配置其他程序的代理，正常使用不一定需要；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>网络流量状态：</li>
</ul>
</td>
      <td>实时显示当前经过 NekoRay 处理的网络流量的细节（代理流量与直连流量的上传/下载速度）。</td>
    </tr>
  </tbody>
</table>

<h2 id="关键配置">关键配置：</h2>
<blockquote class="info">
  <p>关于语言：软件默认语言跟随系统，如果你的系统语言不是中文但需要中文界面，请于</p>

  <p><code class="language-plaintext highlighter-rouge">首选项 &gt; 基本设置 &gt; 样式 &gt; Language</code><br>
<code class="language-plaintext highlighter-rouge">Preference &gt; Basic Settings &gt; Style &gt; Language</code></p>

  <p>切换语言为中文。</p>
</blockquote>

<hr class="break">

<p>导航至工具栏的程序选项，建议开启<code class="language-plaintext highlighter-rouge">跟随系统启动</code>（开机自启动）以及<code class="language-plaintext highlighter-rouge">记住最后的配置</code>（关闭程序时记住启用的节点、代理模式等设置）。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/99c1a3d2888320a607ad8.png" alt=""></p>

<h3 id="首选项--基本设置">首选项 &gt; 基本设置：</h3>
<p>此分类中大部分选项除非有特殊需要否则无需改动</p>

<ul>
  <li>
<strong>&gt; 样式：</strong>更改语言与界面主题</li>
</ul>

<h3 id="首选项--路由设置">首选项 &gt; 路由设置：</h3>
<blockquote class="info">
  <p><strong>关于分流</strong>：大部分代理客户端都带有分流的功能，可以基于域名、IP、进程名配置<strong class="h">分流规则，指定对应网络流量通过代理或者直连</strong>（例：A站 https://acfun.cn/… 无法从国外大部分地区访问，因此可配置域名 acfun.cn 通过直连连接）。</p>
</blockquote>

<ul>
  <li>
<strong>&gt; 通用：</strong>若无需要无需改动</li>
  <li>
<strong>&gt; DNS：</strong>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">简易 DNS 设置 &gt; 远程 DNS</code> 配置代理流量经过的 DNS 服务器，默认选项中含有 Google 和 Cloudflare 提供的 DNS 服务，个人偏向于使用 Cloudflare。<strong>请避免在此选项中填入国内的 DNS 服务或其他不值得信任的 DNS 服务！</strong>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">简易 DNS 设置 &gt; 直连 DNS</code> 配置直连流量经过的 DNS 服务器（意义不大）</li>
    </ul>
  </li>
  <li>
    <p><strong>&gt; 简易路由：</strong>配置分流规则。</p>

    <p>我所使用的设置：</p>

    <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/0c202b196795f517bbb78.png" alt=""></p>

    <ul>
      <li>
        <p><strong>IP- 直连：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>geoip:private
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>域名 - 直连：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>domain_suffix:moegirl.org.cn
domain_suffix:moegirl.org.cn
domain_suffix:moegirl.uk
domain_suffix:saraba1st.com
domain_suffix:stage3rd.com
domain_suffix:s1vote.com
domain_suffix:dmzj.com
domain_suffix:bog.ac
domain_suffix:csdn.net
domain_suffix:jianshu.com
domain_suffix:tieba.baidu.com
domain_suffix:baike.baidu.com
domain_suffix:acfun.cn
domain_suffix:acfun.tv
domain_suffix:aixifan.com
domain_suffix:kuaishou.com
domain_suffix:ksurl.cn
domain_suffix:kuaishouzt.com
domain_suffix:douban.com
domain_suffix:home.xsus.me
domain_suffix:sda1.dev
domain_suffix:hdslb.com
domain_suffix:qcloud.com
domain_suffix:qdaily.com
domain_suffix:qdmm.com
domain_suffix:qhimg.com
domain_suffix:qhres.com
domain_suffix:qq.com
domain_suffix:qqurl.com
domain_suffix:woozooo.com
domain_suffix:weibo.com
domain_suffix:link.zhihu.com
domain_suffix:sspai.com
domain_suffix:gcores.com
domain_suffix:wantwords.net
domain_suffix:gitee.com
domain_suffix:cnblogs.com
domain_suffix:mcbbs.net
domain_suffix:apple.com
domain_suffix:yxsjmc.cn
domain_suffix:weiyun.com
domain_suffix:csdnimg.cn
domain_suffix:enazo.cn
domain_suffix:nmbxd1.com
domain_suffix:uselesses.com
domain_suffix:126.net
domain_suffix:163.com
domain_suffix:yuque.com
domain_suffix:126.net
domain_suffix:163.com
domain_suffix:127.net
domain_suffix:zhihu.com
domain_suffix:idqqimg.com
domain_suffix:sda1.dev
domain_suffix:live.bilibili.com
domain_keyword:lanzou
domain_keyword:sina
domain_keyword:qq-web-legacy
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>域名 - 阻止：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>geosite:category-ads-all
domain:appcenter.ms
domain:firebase.io
domain:crashlytics.com
domain_suffix:appsflyer.com
domain_suffix:doubleclick.net
domain_suffix:mmstat.com
domain_suffix:vungle.com
domain_keyword:admarvel
domain_keyword:admaster
domain_keyword:adsage
domain_keyword:adsmogo
domain_keyword:adsrvmedia
domain_keyword:adwords
domain_keyword:adservice
domain_keyword:domob
domain_keyword:duomeng
domain_keyword:dwtrack
domain_keyword:guanggao
domain_keyword:lianmeng
domain_keyword:mopub
domain_keyword:omgmta
domain_keyword:openx
domain_keyword:partnerad
domain_keyword:pingfore
domain_keyword:supersonicads
domain_keyword:uedas
domain_keyword:umeng
domain_keyword:usage
domain_keyword:wlmonitor
domain_keyword:zjtoolbar
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="首选项--tun-设置仅影响-tun-模式代理">首选项 &gt; TUN 设置（仅影响 TUN 模式代理）：</h3>
<blockquote class="info">
  <p>有关 TUN 代理和其他代理模式的讲解请见下文</p>
</blockquote>

<table>
  <tbody>
    <tr>
      <td>
<ul>
  <li>启用 Tun IPV6：</li>
</ul>
</td>
      <td>可开启，除非日后使用 TUN 模式时发现问题；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>Strict Route (严格路由)：</li>
</ul>
</td>
      <td>开启。关闭本设置会导致 DNS 泄露；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>FakeDNS：</li>
</ul>
</td>
      <td>开启；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>绕过CIDR、绕过进程名：</li>
</ul>
</td>
      <td>按需自行设置（可开启任务管理器 Ctrl Shift ESC，导航至详细信息标签查看进程名）；</td>
    </tr>
  </tbody>
</table>

<h3 id="导入节点">导入节点：</h3>
<blockquote class="info">
  <p>假设你已经购买了机场订阅，或者有其他获取节点的渠道（自建节点、免费公开节点等）。</p>
</blockquote>

<h4 id="从订阅链接导入">从订阅链接导入：</h4>
<p>从机场网站复制好订阅链接后，在界面中简单按下<code class="language-plaintext highlighter-rouge">Ctrl V</code>，或者导航至 <code class="language-plaintext highlighter-rouge">工具栏 &gt; 服务器 &gt; 从剪贴板添加</code></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/2b709391fbe731f23fccb.png" alt=""></p>

<p>选择：<code class="language-plaintext highlighter-rouge">作为订阅（创建新租）</code></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/aebebd6d3349f8556ba3f.png" alt=""></p>

<p>在工具栏打开 <code class="language-plaintext highlighter-rouge">首选项 &gt; 分组</code>，此时应该可以看到新添加的分组。你可以定期回到这里更新订阅。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e288375c7793cdb0e6f8c.png" alt="">
默认分组此时就可以删除了</p>

<p>此外，你也可以直接复制节点文本导入节点，本文便不再赘述。</p>

<h3 id="开始使用代理">开始使用代理：</h3>
<p>回到程序主界面，切换到刚刚添加的分组标签：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/ce34a7848ea260e1cb2b0.png" alt=""></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/073d2af95c05d17e0c36a.png" alt="">
此时，你应该可以看到全部新添加的节点：</p>

<p>单击选中一个节点，按<code class="language-plaintext highlighter-rouge">Enter</code>键即可切换至对应节点。此时，任何经过 NekoRay 代理且未被路由设置排除的流量都会通过连接的节点进行代理了。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/94040f67b3c850e1bcacc.png" alt="">
连接到节点后的日志消息</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e00351ec2866be2df2eca.png" alt="">
界面左下角也会显示当前连接的节点名称</p>

<h4 id="代理模式">代理模式：</h4>
<blockquote class="info">
  <p>参见：<em foot="[&gt;&gt;关于端口转发模式、系统代理与 TUN 模式]"><sup id="fnref:proxy-mode" role="doc-noteref"><a pageurl="/we_fuck_gfw" href="#fn:proxy-mode" class="footnote" rel="footnote">1</a></sup></em>。</p>
</blockquote>

<p>在 NekoRay 主界面工具栏找到 Tun 模式和系统代理的复选框</p>

<p>ps: 两个都勾选的话系统代理也会被 TUN 覆盖掉
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/d6d010c075d520d45a8d1.png" alt=""></p>

<p><strong>正常使用推荐直接开启系统代理即可。</strong>对于普通用户，除非特别需要代理某些不支持系统代理的程序（例：使用 Windows 的 cmd.exe 命令提示符导入ruby gem、为游戏提供加速等）时需要开启 TUN，其他时候不建议 TUN 模式常驻开启。</p>

<h3 id="选择最佳节点理解设备的网络代理状态">选择最佳节点、理解设备的网络代理状态</h3>

<h4 id="节点测速">节点测速：</h4>
<p>NekoRay 内含多种节点测速的方法。在节点列表中右键或在工具栏打开<code class="language-plaintext highlighter-rouge">服务器</code>标签，按需求选择<code class="language-plaintext highlighter-rouge">当前选中</code>或<code class="language-plaintext highlighter-rouge">当前分组</code>为对应节点选择测速方法。</p>

<p>例：选择全部日本节点并对<code class="language-plaintext highlighter-rouge">当前选中</code>进行测速
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/9047f895001729dcab127.png" alt=""></p>

<ul>
  <li>
    <p><strong>TCP Ping</strong>: 延迟测试。可用于在全部节点中快速确定节点可用性。</p>
  </li>
  <li>
    <p><strong>完整测试 &gt; 下载速度：</strong> 下载速度测试。测试耗时稍长，建议在 TCP Ping 测试一遍的基础上对部分节点进行更实际的测速（<strong>**MiB/s</strong> 数字越大节点越快）。</p>
  </li>
</ul>

<p>TCP Ping 之后按照测试结果对节点排序
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e34b2ea35addb2cb144a0.png" alt=""></p>

<h4 id="网络流量状态">网络流量状态：</h4>
<p>界面的右下角会显示实时更新的当前网络流量状态。</p>

<p>当你发现某个网址无法连接的时候，可以查看这里的状态以确定问题是否由于节点导致，考虑是否需要切换节点。
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/4fffb96f90aba0511774b.png" alt=""></p>

<h4 id="测试代理效果">测试代理效果：</h4>
<p>访问 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://ipleak.net/">ipleak.net</a>
 查看当前代理的效果。</p>

<p>理想的代理：No forwarded IP detected ~ 未检测到转发的 IP；DNS 地址与节点来自同一个国家
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/22826e466e01ca1ec7d3a.png"></p>

<p>DNS 列表中夹杂着来自运营商的DNS地址：DNS泄露，请重新检查相关设置！
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e5e53e374c1db38f8de5f.png"></p>

<h3 id="其他关于网络安全">其他：关于网络安全</h3>

<h4 id="任何时候都应该使用-https">任何时候都应该使用 HTTPS！</h4>
<p><strong>通过 HTTP 协议访问网络会面临着遭受中间人攻击的严重风险。</strong>中间人攻击指的是由运营商、CDN 网络、长城防火墙等通过劫持并篡改你接收到的数据包内容进行的欺骗、诈骗等行为。</p>

<h4 id="防止-webrtc-泄露真实-ip">防止 WebRTC 泄露真实 IP</h4>
<p>由于浏览器实现 WebRTC（网络实时通讯）的方法中存在的严重漏洞，<strong>一个网站只需通过简单的 Javascript 便可以获得用户的真实 IP。</strong>解决方案包括禁用 WebRTC 以及使用插件防止泄露（如 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/aghorler/WebRTC-Leak-Prevent">WebRTC Leak Prevent</a>）</p>

<p>例：使用 WebRTC Leak Prevent 防止泄露真实 IP
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/17f128e4e3967f3101678.png"></p>

<h4 id="防止-cdn-泄露隐私">防止 CDN 泄露隐私</h4>
<p>防止由使用不安全的 CDN（内容分发网络）所导致的隐私泄露：
<a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://decentraleyes.org/">Decentraleyes</a></p>

<h4 id="避免使用不可信的浏览器访问网络">避免使用不可信的浏览器访问网络</h4>
<p><strong>任何情况下从原则上都不应使用任何国产商业浏览器，</strong>包括QQ、搜狗、360、“中国特供版”火狐，以及微信 QQ 微企等软件的内置浏览器。不是很推荐使用 Google Chrome 与 Edge，避免被谷歌和微软搜集隐私。推荐使用 Firefox（注意甄别“中国特供版”火狐！）及 Ungoogled Chrome。</p>

<hr>

<p class="stroke echorb bigger">本教程到这里就结束啦。期待下次再见~</p>

<h3 id="参见">参见：</h3>
<ul>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray">MatsuriDayo/nekoray</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://matsuridayo.github.io/n-configuration/">NekoRay 官方文档</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://sing-box.sagernet.org/zh/configuration/">Sing-box 官方文档</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://reconsidera.github.io/#/">数字集权时代生存手记</a></p>
  </li>
</ul>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:proxy-mode" role="doc-endnote">

      <p><strong class="u">关于端口转发模式、系统代理与 TUN 模式：</strong></p>

      <ul>
        <li>
<strong>端口转发</strong> 是很多代理客户端的默认模式。在这个模式下客户端不会主动代理设备上的任何流量，<strong>须手动在需要代理的软件中设置使用本机的对应端口进行代理</strong>（如：127.0.0.1:2080，其中127.0.0.1代表本地主机，2080为代理客户端监听的端口）；</li>
      </ul>

      <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/39ff57b95dc0bf9ae44cf.png" alt="">
例：QBitTorrent 中的代理设置</p>

      <ul>
        <li>
<strong>系统代理</strong> 通过<strong>使用 Windows 默认的代理设置，代理 Windows 设备中的<em>大部分</em>网络流量</strong>（相当于自动将 <code class="language-plaintext highlighter-rouge">Windows 设置 &gt; 网络和 Internet &gt; 代理 &gt; 手动设置代理</code> 中的地址设置成端口转发模式中使用的地址；这种情况下，有些软件不会遵守本设置，因此不会进行代理）；</li>
      </ul>

      <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/b267fe918db95d8b4d1ff.png" alt="">
自动设置后的 Windows 系统代理</p>

      <ul>
        <li>
<strong>TUN 模式</strong> 通过复杂的原理，<strong>真正意义上代理设备的全部流量，类似于 VPN 的代理模式。</strong>缺点：必须特别设置分流规则排除不应经过代理的网站与软件。</li>
      </ul>
      <p><a pageurl="/we_fuck_gfw" href="#fnref:proxy-mode" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
  </ol>
</div>

            </main>
            <div class="buttonBar">
              <label class="fontTg toggle" title="切换字体"><input type="checkbox"></label>
              <label class="darkTg toggle" title="切换深色模式"><input type="checkbox" id="dark1"></label>
              <label class="fullscreenTg toggle" id="enterFull" title="进入全屏"></label>
            </div>
          </div>
        </div>
        <div class="bottom"></div>
      </div>
      <div class="c2">
        <div class="c2-b"></div>
        <div class="chatroom">
          <script async src="https://giscus.app/client.js" crossorigin="anonymous" data-repo="Kirisoup/kirisoup.github.io" data-repo-id="R_kgDOKbS-PQ" data-category="Announcements" data-category-id="DIC_kwDOKbS-Pc4CaAzL" data-mapping="specific" data-term="chat-room" data-reactions-enabled="0" data-input-position="top" data-theme="https://kirisoup.github.io/assets/css/giscus.css" data-lang="zh-CN" data-loading="lazy">
          </script>
        </div>
        <!-- <div class="giscus"></div> -->
        <!-- <iframe id="navlink" width="90" height="90" style="border:none" src="https://dimden.neocities.org/navlink/" loading="lazy" name="neolink"></iframe> -->
      </div>
    </div>
    <div class="fullscreen">
      <div class="buttonBar">
        <span class="title"> A:¥霧雨蘑菇店/¥⑨都能读懂的网络代理教程：使用¥NekoRay¥/¥NekoBox¥进行网络代理.xml </span>
        <label class="fontTg toggle" title="切换字体"><input type="checkbox"></label>
        <label class="darkTg toggle" title="切换深色模式"><input type="checkbox" id="dark2"></label>
        <label class="fullscreenTg toggle" id="exitFull" title="退出全屏"></label>
      </div>
      <div class="content f">
        <h2 id="f_index">目录</h2>
<ul id="f_markdown-toc">
  <li><a pageurl="/we_fuck_gfw" href="#f_index" id="f_markdown-toc-index">目录</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#f_%E5%89%8D%E8%A8%80" id="f_markdown-toc-前言">前言：</a></li>
  <li>
<a pageurl="/we_fuck_gfw" href="#f_%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86" id="f_markdown-toc-前置知识">前置知识：</a>    <ul>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86" id="f_markdown-toc-什么是网络代理">什么是网络代理：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E6%9C%AF%E8%AF%AD" id="f_markdown-toc-术语">术语：</a></li>
    </ul>
  </li>
  <li><a pageurl="/we_fuck_gfw" href="#f_%E4%B8%8B%E8%BD%BD-nekoray%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80--%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" id="f_markdown-toc-下载-nekoray仓库地址--下载地址">下载 NekoRay：仓库地址 | 下载地址</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#f_%E5%88%9D%E6%AC%A1%E5%90%AF%E5%8A%A8" id="f_markdown-toc-初次启动">初次启动</a></li>
  <li><a pageurl="/we_fuck_gfw" href="#f_%E7%95%8C%E9%9D%A2" id="f_markdown-toc-界面">界面</a></li>
  <li>
<a pageurl="/we_fuck_gfw" href="#f_%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE" id="f_markdown-toc-关键配置">关键配置：</a>    <ul>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E9%A6%96%E9%80%89%E9%A1%B9--%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE" id="f_markdown-toc-首选项--基本设置">首选项 &gt; 基本设置：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E9%A6%96%E9%80%89%E9%A1%B9--%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE" id="f_markdown-toc-首选项--路由设置">首选项 &gt; 路由设置：</a></li>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E9%A6%96%E9%80%89%E9%A1%B9--tun-%E8%AE%BE%E7%BD%AE%E4%BB%85%E5%BD%B1%E5%93%8D-tun-%E6%A8%A1%E5%BC%8F%E4%BB%A3%E7%90%86" id="f_markdown-toc-首选项--tun-设置仅影响-tun-模式代理">首选项 &gt; TUN 设置（仅影响 TUN 模式代理）：</a></li>
      <li>
<a pageurl="/we_fuck_gfw" href="#f_%E5%AF%BC%E5%85%A5%E8%8A%82%E7%82%B9" id="f_markdown-toc-导入节点">导入节点：</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E4%BB%8E%E8%AE%A2%E9%98%85%E9%93%BE%E6%8E%A5%E5%AF%BC%E5%85%A5" id="f_markdown-toc-从订阅链接导入">从订阅链接导入：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#f_%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86" id="f_markdown-toc-开始使用代理">开始使用代理：</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" id="f_markdown-toc-代理模式">代理模式：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#f_%E9%80%89%E6%8B%A9%E6%9C%80%E4%BD%B3%E8%8A%82%E7%82%B9%E7%90%86%E8%A7%A3%E8%AE%BE%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%8A%B6%E6%80%81" id="f_markdown-toc-选择最佳节点理解设备的网络代理状态">选择最佳节点、理解设备的网络代理状态</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E8%8A%82%E7%82%B9%E6%B5%8B%E9%80%9F" id="f_markdown-toc-节点测速">节点测速：</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E7%8A%B6%E6%80%81" id="f_markdown-toc-网络流量状态">网络流量状态：</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%90%86%E6%95%88%E6%9E%9C" id="f_markdown-toc-测试代理效果">测试代理效果：</a></li>
        </ul>
      </li>
      <li>
<a pageurl="/we_fuck_gfw" href="#f_%E5%85%B6%E4%BB%96%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8" id="f_markdown-toc-其他关于网络安全">其他：关于网络安全</a>        <ul>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E4%BB%BB%E4%BD%95%E6%97%B6%E5%80%99%E9%83%BD%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8-https" id="f_markdown-toc-任何时候都应该使用-https">任何时候都应该使用 HTTPS！</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E9%98%B2%E6%AD%A2-webrtc-%E6%B3%84%E9%9C%B2%E7%9C%9F%E5%AE%9E-ip" id="f_markdown-toc-防止-webrtc-泄露真实-ip">防止 WebRTC 泄露真实 IP</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E9%98%B2%E6%AD%A2-cdn-%E6%B3%84%E9%9C%B2%E9%9A%90%E7%A7%81" id="f_markdown-toc-防止-cdn-泄露隐私">防止 CDN 泄露隐私</a></li>
          <li><a pageurl="/we_fuck_gfw" href="#f_%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%8F%AF%E4%BF%A1%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C" id="f_markdown-toc-避免使用不可信的浏览器访问网络">避免使用不可信的浏览器访问网络</a></li>
        </ul>
      </li>
      <li><a pageurl="/we_fuck_gfw" href="#f_%E5%8F%82%E8%A7%81" id="f_markdown-toc-参见">参见：</a></li>
    </ul>
  </li>
</ul>

<p class="fake h1">⑨都能读懂的网络代理教程：<br>
<em class="small">使用 NekoRay / NekoBox 进行网络代理</em></p>

<blockquote class="info">
  <p>注：本教程面向 Windows 用户。</p>
</blockquote>

<h2 id="f_前言">前言：</h2>
<p>由于前几天从 Clash for Windows 删库开始的一系列事件，尤其是 Clash 内核与 Clash.Meta 内核的删库/归档，整个 Clash 客户端生态灰飞烟灭。</p>

<p>Clash for Windows 作为一个如此普及的代理客户端，加上我自己也是在两年前左右从 V2rayN 转为 CFW 忠实用户，正好借着这次迁移至 NekoRay 的机会，便想着干脆为这个支持 Xray, Sing-box, Hysteria, Naive 等多个内核，并且有着优秀方便的分流规则与 TUN 代理的优秀客户端写一篇使用教程。</p>

<h2 id="f_前置知识">前置知识：</h2>
<blockquote class="info">
  <p>虽然这一部分并非必须，但可以帮助你对网络代理建立系统性认识。若对网络代理已足够了解，可直接跳转下一部分</p>
</blockquote>

<h3 id="f_什么是网络代理">什么是网络代理：</h3>
<p>简单来说，当你访问一个网站 （如 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://google.com/">https://google.com/</a>），或是应用联网访问数据时，你的设备会向网络运营商发出请求，与目标网址的服务器间建立连接，开始数据交换。</p>

<p>在这种情况下，你的 IP 地址向目标服务器公开、运营商也会知道你所访问的地址。通常称这种连接方式为<strong>直连</strong>。</p>

<p>而<strong>使用代理的话，你的设备转而向运营商请求连接代理服务器，并且数据传输将会被加密，再进一步由代理服务器进一步连接至目标服务器；</strong></p>

<p>因此，运营商无法得知你此时连接的真实目的地与意图，同时目标服务器也无法得知你的真实IP，从而<strong>达到保护隐私与绕过防火墙的目的。</strong></p>

<h3 id="f_术语">术语：</h3>
<ul>
  <li>
<strong><em>代理客户端：</em></strong><br>
为你的设备<strong class="h">处理网络代理的客户端</strong>，拥有的功能通常包括使用多种方式代理本机网络流量，可配置的分流规则，从<em class="u">订阅链接</em>批量下载<em class="u">节点</em>等功能。</li>
  <li>
    <p><strong><em>节点：</em></strong><br>
一串包括了代理服务器地址，加密协议，密钥等信息的配置，系<strong class="h">建立代理连接的关键要素</strong>（使用机场的话大多数时候便无需手动配置节点）。</p>
  </li>
  <li>
    <p><strong><em>机场：</em></strong><br>
<strong class="h">提供与维护</strong>分布于世界各地的<strong class="h">代理服务器的服务商</strong>，通常通过<em class="u">订阅</em>的方式提供节点。</p>
  </li>
  <li>
    <p><strong><em>订阅链接：</em></strong><br>
大多数机场使用订阅链接作为<strong class="h">将</strong>全部<strong class="h">节点</strong>一次性<strong class="h">导入至代理客户端的方式</strong>（基于客户端的不同，用户还可以通过手动复制等方式导入节点）。</p>
  </li>
  <li>
    <p><strong><em>上传与下载：</em></strong><br>
上传指由你的设备通过互联网<strong class="h">向外界输出数据的行为</strong>，相反，下载则是你的设备<strong class="h">接收外界数据的行为</strong>；当你访问网络的时候，上传与下载无时不刻不在进行。</p>
  </li>
  <li>
<strong><em>延迟与速度：</em></strong><br>
延迟与速度是两个经常被混淆的概念。
　　
    <ul>
      <li>
<strong class="u">延迟</strong>
指<strong class="h">数据</strong>从你的设备<strong class="h">发送至目标服务器</strong>（在这个语境下则是代理服务器），目标服务器的回复<strong class="h">再传回你的设备所使用的总时间</strong>（如：200ms）；
　　</li>
      <li>
<strong class="u">速度</strong>
分为上传速度与下载速度，则是指<strong class="h">一定时间内你的设备所能上传/下载的数据总量</strong>（如：10mb/s）。</li>
    </ul>

    <blockquote class="info">
      <p>在使用代理的多数时候，我们更关注的是上传与下载速度，因为这通常是导致网络通信不畅的主要瓶颈。而延迟则通常用于检测节点的可用性，对网络的影响更加次要；</p>
    </blockquote>
  </li>
</ul>

<hr class="break">

<p class="stroke echorb bigger">接下来，本教程将正式启程！</p>

<hr>

<h2 id="f_下载-nekoray仓库地址--下载地址">下载 NekoRay：<a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray">仓库地址</a> | <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray/releases/latest">下载地址</a>
</h2>
<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/1c22af3b4ff6c1dbbecc2.png" alt=""></p>

<p>Windows 用户的请从 Release 中的下载文件名为<code class="language-plaintext highlighter-rouge">nekoray-...-windows64.zip</code>的文件。</p>

<p>下载后无需安装，自行解压到合适的路径，运行位于<code class="language-plaintext highlighter-rouge">.\nekoray-...-windows64\nekoray\nekoray.exe</code>路径的文件即可启动程序。</p>

<h2 id="f_初次启动">初次启动</h2>
<p>启动程序后首先将会看到以下窗口：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/28ee88573f88511ba6963.png" alt=""></p>

<p>两个内核在一般使用场景下区别不大，推荐使用 sing-box 内核。</p>

<h2 id="f_界面">界面</h2>
<p>进入主界面之后，会看到与下图类似的界面：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/73680951d07b5b4935f82.png" alt=""></p>

<p>其中，序号1到7分别是（暂时不理解的话没关系，下文中会对重要的部分进行讲解）：</p>

<table>
  <tbody>
    <tr>
      <td>
<ul>
  <li>工具栏：</li>
</ul>
</td>
      <td>程序配置、设置选项、以及导入代理节点等功能都可在此调出；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>代理模式：</li>
</ul>
</td>
      <td>默认的端口转发模式、系统代理模式、TUN 模式；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>节点列表：</li>
</ul>
</td>
      <td>接下来导入的节点将会显示在本列表中；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>日志：</li>
</ul>
</td>
      <td>会实时记录节点开关状态、网络连接等等信息——正常使用没有问题的话并不需要理解日志中的信息；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>当前节点：</li>
</ul>
</td>
      <td>显示当前启用的代理节点名称；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>转发端口：</li>
</ul>
</td>
      <td>用于手动配置其他程序的代理，正常使用不一定需要；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>网络流量状态：</li>
</ul>
</td>
      <td>实时显示当前经过 NekoRay 处理的网络流量的细节（代理流量与直连流量的上传/下载速度）。</td>
    </tr>
  </tbody>
</table>

<h2 id="f_关键配置">关键配置：</h2>
<blockquote class="info">
  <p>关于语言：软件默认语言跟随系统，如果你的系统语言不是中文但需要中文界面，请于</p>

  <p><code class="language-plaintext highlighter-rouge">首选项 &gt; 基本设置 &gt; 样式 &gt; Language</code><br>
<code class="language-plaintext highlighter-rouge">Preference &gt; Basic Settings &gt; Style &gt; Language</code></p>

  <p>切换语言为中文。</p>
</blockquote>

<hr class="break">

<p>导航至工具栏的程序选项，建议开启<code class="language-plaintext highlighter-rouge">跟随系统启动</code>（开机自启动）以及<code class="language-plaintext highlighter-rouge">记住最后的配置</code>（关闭程序时记住启用的节点、代理模式等设置）。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/99c1a3d2888320a607ad8.png" alt=""></p>

<h3 id="f_首选项--基本设置">首选项 &gt; 基本设置：</h3>
<p>此分类中大部分选项除非有特殊需要否则无需改动</p>

<ul>
  <li>
<strong>&gt; 样式：</strong>更改语言与界面主题</li>
</ul>

<h3 id="f_首选项--路由设置">首选项 &gt; 路由设置：</h3>
<blockquote class="info">
  <p><strong>关于分流</strong>：大部分代理客户端都带有分流的功能，可以基于域名、IP、进程名配置<strong class="h">分流规则，指定对应网络流量通过代理或者直连</strong>（例：A站 https://acfun.cn/… 无法从国外大部分地区访问，因此可配置域名 acfun.cn 通过直连连接）。</p>
</blockquote>

<ul>
  <li>
<strong>&gt; 通用：</strong>若无需要无需改动</li>
  <li>
<strong>&gt; DNS：</strong>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">简易 DNS 设置 &gt; 远程 DNS</code> 配置代理流量经过的 DNS 服务器，默认选项中含有 Google 和 Cloudflare 提供的 DNS 服务，个人偏向于使用 Cloudflare。<strong>请避免在此选项中填入国内的 DNS 服务或其他不值得信任的 DNS 服务！</strong>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">简易 DNS 设置 &gt; 直连 DNS</code> 配置直连流量经过的 DNS 服务器（意义不大）</li>
    </ul>
  </li>
  <li>
    <p><strong>&gt; 简易路由：</strong>配置分流规则。</p>

    <p>我所使用的设置：</p>

    <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/0c202b196795f517bbb78.png" alt=""></p>

    <ul>
      <li>
        <p><strong>IP- 直连：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>geoip:private
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>域名 - 直连：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>domain_suffix:moegirl.org.cn
domain_suffix:moegirl.org.cn
domain_suffix:moegirl.uk
domain_suffix:saraba1st.com
domain_suffix:stage3rd.com
domain_suffix:s1vote.com
domain_suffix:dmzj.com
domain_suffix:bog.ac
domain_suffix:csdn.net
domain_suffix:jianshu.com
domain_suffix:tieba.baidu.com
domain_suffix:baike.baidu.com
domain_suffix:acfun.cn
domain_suffix:acfun.tv
domain_suffix:aixifan.com
domain_suffix:kuaishou.com
domain_suffix:ksurl.cn
domain_suffix:kuaishouzt.com
domain_suffix:douban.com
domain_suffix:home.xsus.me
domain_suffix:sda1.dev
domain_suffix:hdslb.com
domain_suffix:qcloud.com
domain_suffix:qdaily.com
domain_suffix:qdmm.com
domain_suffix:qhimg.com
domain_suffix:qhres.com
domain_suffix:qq.com
domain_suffix:qqurl.com
domain_suffix:woozooo.com
domain_suffix:weibo.com
domain_suffix:link.zhihu.com
domain_suffix:sspai.com
domain_suffix:gcores.com
domain_suffix:wantwords.net
domain_suffix:gitee.com
domain_suffix:cnblogs.com
domain_suffix:mcbbs.net
domain_suffix:apple.com
domain_suffix:yxsjmc.cn
domain_suffix:weiyun.com
domain_suffix:csdnimg.cn
domain_suffix:enazo.cn
domain_suffix:nmbxd1.com
domain_suffix:uselesses.com
domain_suffix:126.net
domain_suffix:163.com
domain_suffix:yuque.com
domain_suffix:126.net
domain_suffix:163.com
domain_suffix:127.net
domain_suffix:zhihu.com
domain_suffix:idqqimg.com
domain_suffix:sda1.dev
domain_suffix:live.bilibili.com
domain_keyword:lanzou
domain_keyword:sina
domain_keyword:qq-web-legacy
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>域名 - 阻止：</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>geosite:category-ads-all
domain:appcenter.ms
domain:firebase.io
domain:crashlytics.com
domain_suffix:appsflyer.com
domain_suffix:doubleclick.net
domain_suffix:mmstat.com
domain_suffix:vungle.com
domain_keyword:admarvel
domain_keyword:admaster
domain_keyword:adsage
domain_keyword:adsmogo
domain_keyword:adsrvmedia
domain_keyword:adwords
domain_keyword:adservice
domain_keyword:domob
domain_keyword:duomeng
domain_keyword:dwtrack
domain_keyword:guanggao
domain_keyword:lianmeng
domain_keyword:mopub
domain_keyword:omgmta
domain_keyword:openx
domain_keyword:partnerad
domain_keyword:pingfore
domain_keyword:supersonicads
domain_keyword:uedas
domain_keyword:umeng
domain_keyword:usage
domain_keyword:wlmonitor
domain_keyword:zjtoolbar
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="f_首选项--tun-设置仅影响-tun-模式代理">首选项 &gt; TUN 设置（仅影响 TUN 模式代理）：</h3>
<blockquote class="info">
  <p>有关 TUN 代理和其他代理模式的讲解请见下文</p>
</blockquote>

<table>
  <tbody>
    <tr>
      <td>
<ul>
  <li>启用 Tun IPV6：</li>
</ul>
</td>
      <td>可开启，除非日后使用 TUN 模式时发现问题；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>Strict Route (严格路由)：</li>
</ul>
</td>
      <td>开启。关闭本设置会导致 DNS 泄露；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>FakeDNS：</li>
</ul>
</td>
      <td>开启；</td>
    </tr>
    <tr>
      <td>
<ul>
  <li>绕过CIDR、绕过进程名：</li>
</ul>
</td>
      <td>按需自行设置（可开启任务管理器 Ctrl Shift ESC，导航至详细信息标签查看进程名）；</td>
    </tr>
  </tbody>
</table>

<h3 id="f_导入节点">导入节点：</h3>
<blockquote class="info">
  <p>假设你已经购买了机场订阅，或者有其他获取节点的渠道（自建节点、免费公开节点等）。</p>
</blockquote>

<h4 id="f_从订阅链接导入">从订阅链接导入：</h4>
<p>从机场网站复制好订阅链接后，在界面中简单按下<code class="language-plaintext highlighter-rouge">Ctrl V</code>，或者导航至 <code class="language-plaintext highlighter-rouge">工具栏 &gt; 服务器 &gt; 从剪贴板添加</code></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/2b709391fbe731f23fccb.png" alt=""></p>

<p>选择：<code class="language-plaintext highlighter-rouge">作为订阅（创建新租）</code></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/aebebd6d3349f8556ba3f.png" alt=""></p>

<p>在工具栏打开 <code class="language-plaintext highlighter-rouge">首选项 &gt; 分组</code>，此时应该可以看到新添加的分组。你可以定期回到这里更新订阅。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e288375c7793cdb0e6f8c.png" alt="">
默认分组此时就可以删除了</p>

<p>此外，你也可以直接复制节点文本导入节点，本文便不再赘述。</p>

<h3 id="f_开始使用代理">开始使用代理：</h3>
<p>回到程序主界面，切换到刚刚添加的分组标签：</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/ce34a7848ea260e1cb2b0.png" alt=""></p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/073d2af95c05d17e0c36a.png" alt="">
此时，你应该可以看到全部新添加的节点：</p>

<p>单击选中一个节点，按<code class="language-plaintext highlighter-rouge">Enter</code>键即可切换至对应节点。此时，任何经过 NekoRay 代理且未被路由设置排除的流量都会通过连接的节点进行代理了。</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/94040f67b3c850e1bcacc.png" alt="">
连接到节点后的日志消息</p>

<p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e00351ec2866be2df2eca.png" alt="">
界面左下角也会显示当前连接的节点名称</p>

<h4 id="f_代理模式">代理模式：</h4>
<blockquote class="info">
  <p>参见：<em foot="[&gt;&gt;关于端口转发模式、系统代理与 TUN 模式]"><sup id="f_fnref:proxy-mode" role="doc-noteref"><a pageurl="/we_fuck_gfw" href="#f_fn:proxy-mode" class="footnote" rel="footnote">1</a></sup></em>。</p>
</blockquote>

<p>在 NekoRay 主界面工具栏找到 Tun 模式和系统代理的复选框</p>

<p>ps: 两个都勾选的话系统代理也会被 TUN 覆盖掉
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/d6d010c075d520d45a8d1.png" alt=""></p>

<p><strong>正常使用推荐直接开启系统代理即可。</strong>对于普通用户，除非特别需要代理某些不支持系统代理的程序（例：使用 Windows 的 cmd.exe 命令提示符导入ruby gem、为游戏提供加速等）时需要开启 TUN，其他时候不建议 TUN 模式常驻开启。</p>

<h3 id="f_选择最佳节点理解设备的网络代理状态">选择最佳节点、理解设备的网络代理状态</h3>

<h4 id="f_节点测速">节点测速：</h4>
<p>NekoRay 内含多种节点测速的方法。在节点列表中右键或在工具栏打开<code class="language-plaintext highlighter-rouge">服务器</code>标签，按需求选择<code class="language-plaintext highlighter-rouge">当前选中</code>或<code class="language-plaintext highlighter-rouge">当前分组</code>为对应节点选择测速方法。</p>

<p>例：选择全部日本节点并对<code class="language-plaintext highlighter-rouge">当前选中</code>进行测速
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/9047f895001729dcab127.png" alt=""></p>

<ul>
  <li>
    <p><strong>TCP Ping</strong>: 延迟测试。可用于在全部节点中快速确定节点可用性。</p>
  </li>
  <li>
    <p><strong>完整测试 &gt; 下载速度：</strong> 下载速度测试。测试耗时稍长，建议在 TCP Ping 测试一遍的基础上对部分节点进行更实际的测速（<strong>**MiB/s</strong> 数字越大节点越快）。</p>
  </li>
</ul>

<p>TCP Ping 之后按照测试结果对节点排序
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e34b2ea35addb2cb144a0.png" alt=""></p>

<h4 id="f_网络流量状态">网络流量状态：</h4>
<p>界面的右下角会显示实时更新的当前网络流量状态。</p>

<p>当你发现某个网址无法连接的时候，可以查看这里的状态以确定问题是否由于节点导致，考虑是否需要切换节点。
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/4fffb96f90aba0511774b.png" alt=""></p>

<h4 id="f_测试代理效果">测试代理效果：</h4>
<p>访问 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://ipleak.net/">ipleak.net</a>
 查看当前代理的效果。</p>

<p>理想的代理：No forwarded IP detected ~ 未检测到转发的 IP；DNS 地址与节点来自同一个国家
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/22826e466e01ca1ec7d3a.png"></p>

<p>DNS 列表中夹杂着来自运营商的DNS地址：DNS泄露，请重新检查相关设置！
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/e5e53e374c1db38f8de5f.png"></p>

<h3 id="f_其他关于网络安全">其他：关于网络安全</h3>

<h4 id="f_任何时候都应该使用-https">任何时候都应该使用 HTTPS！</h4>
<p><strong>通过 HTTP 协议访问网络会面临着遭受中间人攻击的严重风险。</strong>中间人攻击指的是由运营商、CDN 网络、长城防火墙等通过劫持并篡改你接收到的数据包内容进行的欺骗、诈骗等行为。</p>

<h4 id="f_防止-webrtc-泄露真实-ip">防止 WebRTC 泄露真实 IP</h4>
<p>由于浏览器实现 WebRTC（网络实时通讯）的方法中存在的严重漏洞，<strong>一个网站只需通过简单的 Javascript 便可以获得用户的真实 IP。</strong>解决方案包括禁用 WebRTC 以及使用插件防止泄露（如 <a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/aghorler/WebRTC-Leak-Prevent">WebRTC Leak Prevent</a>）</p>

<p>例：使用 WebRTC Leak Prevent 防止泄露真实 IP
<img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/17f128e4e3967f3101678.png"></p>

<h4 id="f_防止-cdn-泄露隐私">防止 CDN 泄露隐私</h4>
<p>防止由使用不安全的 CDN（内容分发网络）所导致的隐私泄露：
<a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://decentraleyes.org/">Decentraleyes</a></p>

<h4 id="f_避免使用不可信的浏览器访问网络">避免使用不可信的浏览器访问网络</h4>
<p><strong>任何情况下从原则上都不应使用任何国产商业浏览器，</strong>包括QQ、搜狗、360、“中国特供版”火狐，以及微信 QQ 微企等软件的内置浏览器。不是很推荐使用 Google Chrome 与 Edge，避免被谷歌和微软搜集隐私。推荐使用 Firefox（注意甄别“中国特供版”火狐！）及 Ungoogled Chrome。</p>

<hr>

<p class="stroke echorb bigger">本教程到这里就结束啦。期待下次再见~</p>

<h3 id="f_参见">参见：</h3>
<ul>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://github.com/MatsuriDayo/nekoray">MatsuriDayo/nekoray</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://matsuridayo.github.io/n-configuration/">NekoRay 官方文档</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://sing-box.sagernet.org/zh/configuration/">Sing-box 官方文档</a></p>
  </li>
  <li>
    <p><a pageurl="/we_fuck_gfw" target="_blank" rel="noopener noreferrer" href="https://reconsidera.github.io/#/">数字集权时代生存手记</a></p>
  </li>
</ul>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="f_fn:proxy-mode" role="doc-endnote">

      <p><strong class="u">关于端口转发模式、系统代理与 TUN 模式：</strong></p>

      <ul>
        <li>
<strong>端口转发</strong> 是很多代理客户端的默认模式。在这个模式下客户端不会主动代理设备上的任何流量，<strong>须手动在需要代理的软件中设置使用本机的对应端口进行代理</strong>（如：127.0.0.1:2080，其中127.0.0.1代表本地主机，2080为代理客户端监听的端口）；</li>
      </ul>

      <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/39ff57b95dc0bf9ae44cf.png" alt="">
例：QBitTorrent 中的代理设置</p>

      <ul>
        <li>
<strong>系统代理</strong> 通过<strong>使用 Windows 默认的代理设置，代理 Windows 设备中的<em>大部分</em>网络流量</strong>（相当于自动将 <code class="language-plaintext highlighter-rouge">Windows 设置 &gt; 网络和 Internet &gt; 代理 &gt; 手动设置代理</code> 中的地址设置成端口转发模式中使用的地址；这种情况下，有些软件不会遵守本设置，因此不会进行代理）；</li>
      </ul>

      <p><img onerror="fallimg(this)" loading="lazy" fetchpriority="low" src="https://telegra.ph/file/b267fe918db95d8b4d1ff.png" alt="">
自动设置后的 Windows 系统代理</p>

      <ul>
        <li>
<strong>TUN 模式</strong> 通过复杂的原理，<strong>真正意义上代理设备的全部流量，类似于 VPN 的代理模式。</strong>缺点：必须特别设置分流规则排除不应经过代理的网站与软件。</li>
      </ul>
      <p><a pageurl="/we_fuck_gfw" href="#f_fnref:proxy-mode" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
  </ol>
</div>

      </div> <!-- really stupid way to fix duplicated id issue -->
      <div class="bottomBar">
        <div class="left">地址：/we_fuck_gfw | 作者：Kirisame Soup ☆ </div>
        <div class="right">
            词量：3783
          | 字符量：7188
        </div>
      </div>
    </div>
    <div class="cornerCara" id="0" title="" onclick="this.id = Math.floor(Math.random() * 15 + 1)"></div>
    <div class="cornerCara-b"></div>
    <div class="ibm-b">
      <div class="pc"></div>
    </div>
    <div class="ibm">
      <label class="mask power" title="开机?"><input type="checkbox"></label>
      <div class="vid">
        <iframe loading="lazy" scrolling="no" frameborder="no" sandbox="allow-same-origin allow-scripts" src="https://www.bilibili.com/blackboard/html5mobileplayer.html?aid=625760&autoplay=1&muted=1"></iframe>
      </div>
      <div class="pc-b"></div>
    </div>
  </body>
  <footer>
    <link rel="stylesheet" href="/assets/css/default/style.css" class="assetsheet" priority="high" onerror="fallss(this)"> <!-- async stylesheet -->
    <link rel="stylesheet" href="/assets/css/markaround.css" class="assetsheet" priority="low" onerror="fallss(this)"> <!-- async stylesheet -->
    <script async src="/assets/js/fallback-cssAsset.js" onerror="fallsc(this)"></script> <!-- load stylesheet asset with ghproxy if needed for gfw suckers -->
    <script defer src="/assets/js/cursor.js" onerror="fallsc(this)" priority="low"></script> <!-- cursor trace -->
    <script> window.addEventListener("load", (event) => { new cursoreffects.ghostCursor(); }); </script> <!-- cursor trace -->
    <script defer src="/assets/js/queryStrings.js" onerror="fallsc(this)"></script>
    <script defer src="/assets/js/link-id-copy.js" onerror="fallsc(this)"></script>
    <script defer src="/assets/js/resize-sync.js" onerror="fallsc(this)"></script>
    <script defer src="/assets/neko/oneko.js" onerror="fallsc(this)" priority="low"></script>
  </footer>
</html>
